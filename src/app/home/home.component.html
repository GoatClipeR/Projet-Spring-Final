<div class="dashboard-wrapper">
  <!-- Decorative Money Elements (Dollar Signs) -->
  <div class="money-element money-top">$</div>
  <div class="money-element money-left">$</div>
  <div class="money-element money-right">$</div>
  <div class="money-element money-middle">$</div>
  
  <div class="container mt-4">
    <!-- Charts panel (collapsible) -->
    <div *ngIf="showGraphs" class="charts-panel mb-4">
      <div class="row g-3">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header"><strong>Customer Growth</strong></div>
            <div class="card-body chart-container">
              <canvas #customerGrowthCanvas></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header"><strong>Top Accounts by Balance</strong></div>
            <div class="card-body chart-container">
              <canvas #topAccountsCanvas></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header"><strong>Account Type Distribution</strong></div>
            <div class="card-body chart-container">
              <canvas #accountTypeCanvas></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header"><strong>Operation Type Distribution</strong></div>
            <div class="card-body chart-container">
              <canvas #operationTypeCanvas></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-3">

      <!-- Dashboard summary cards -->
    <div class="col-12">
      <div class="welcome-header">
        <p class="stats-label welcome-label">Welcome to <span class="brand-highlight">Magma Bank</span></p>
        <button class="btn btn-graph btn-graph-aligned" (click)="toggleGraphs()" aria-label="Toggle graphs and statistics">
          <i class="bi" [ngClass]="showGraphs ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
          {{ showGraphs ? 'Hide' : 'Show' }} Graphs & Stats
        </button>
      </div>
      <div class="d-flex gap-3 stats-row flex-wrap">
        <div class="stat-card p-3">
          <div class="stat-label">Customers</div>
          <div class="stat-value">{{ totalCustomers }}</div>
        </div>
        <div class="stat-card p-3">
          <div class="stat-label">Accounts</div>
          <div class="stat-value">{{ totalAccounts }}</div>
        </div>
        <div class="stat-card p-3">
          <div class="stat-label">Total Balance</div>
          <div class="stat-value">{{ totalBalance | number:'1.2-2' }}</div>
        </div>
        <div class="stat-card p-3">
          <div class="stat-label">Recent ops</div>
          <div class="stat-value">{{ recentOpsCount }}</div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="modern-card-panel">
        <div class="panel-header">
          <div class="panel-title-section">
            <h3 class="panel-title">Customers</h3>
            <p class="panel-subtitle">Recent customer list</p>
          </div>
          <div class="panel-actions">
            <button class="action-btn icon-btn" (click)="goToAllCustomers()" title="View all customers" aria-label="View all customers"><i class="bi bi-list"></i></button>
            <button class="action-btn primary-btn" (click)="openNewCustomer()" title="Add customer" aria-label="Add customer"><i class="bi bi-person-plus"></i></button>
          </div>
        </div>
        
        <div class="panel-content">
          <div *ngIf="loadingCustomers" class="loading-state">
            <div class="spinner"></div>
            <p>Loading customers...</p>
          </div>
          
          <div *ngIf="!loadingCustomers && customers.length" class="customers-list">
            <div *ngFor="let c of customers" class="customer-item">
              <div class="customer-avatar">{{ c.name.charAt(0) }}</div>
              <div class="customer-info">
                <h4 class="customer-name">{{ c.name }}</h4>
                <p class="customer-email">{{ c.email }}</p>
              </div>
              <button class="view-btn" (click)="openCustomerDetails(c)" title="View customer"><i class="bi bi-arrow-right"></i></button>
            </div>
          </div>
          
          <div *ngIf="!loadingCustomers && !customers.length" class="empty-state">
            <div class="empty-icon"><i class="bi bi-inbox"></i></div>
            <p class="empty-text">No customers yet</p>
            <p class="empty-hint">Create your first customer to get started</p>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="modern-card-panel">
        <div class="panel-header">
          <div class="panel-title-section">
            <h3 class="panel-title">Accounts</h3>
            <p class="panel-subtitle">Active accounts overview</p>
          </div>
          <div class="panel-actions">
            <button class="action-btn icon-btn" (click)="goToAllAccounts()" title="View all accounts" aria-label="View all accounts"><i class="bi bi-list"></i></button>
          </div>
        </div>
        
        <div class="panel-content">
          <div *ngIf="loadingAccounts" class="loading-state">
            <div class="spinner"></div>
            <p>Loading accounts...</p>
          </div>
          
          <div *ngIf="!loadingAccounts && accounts.length" class="accounts-list">
            <div *ngFor="let a of accounts" class="account-item">
              <div class="account-header">
                <div class="account-info">
                  <h4 class="account-id">{{ a.id || a.accountId }}</h4>
                  <span class="account-badge" [ngClass]="{'badge-savings': (a.type | accountType) === 'SAVING', 'badge-current': (a.type | accountType) === 'CURRENT'}">{{ a.type | accountType:'label' }}</span>
                </div>
                <button class="view-btn" (click)="openAccount(a)" title="Open account"><i class="bi bi-arrow-right"></i></button>
              </div>
              <div class="account-balance">
                <span class="balance-label">Balance</span>
                <span class="balance-value">{{ a.balance | number:'1.2-2' }}</span>
              </div>
            </div>
          </div>
          
          <div *ngIf="!loadingAccounts && !accounts.length" class="empty-state">
            <div class="empty-icon"><i class="bi bi-inbox"></i></div>
            <p class="empty-text">No accounts yet</p>
            <p class="empty-hint">Create your first account to manage finances</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</div>
